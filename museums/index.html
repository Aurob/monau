<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
        </script>
    <script src="museums.js"></script>
</head>

<body>
    <div id='map_data'>
      <div id='museums'>
      </div>
    </div>
    <iframe src="usmap/map.html"></iframe>
    <div id='museums'></div>
    <script>

        Object.keys(Museums).forEach(state => {
            let state_list = $(`<div id="${state}-list" class="s-list"></div>`);
            for (let i = 0; i < Museums[state].museums.length; i++) {

                let museum = Museums[state].museums[i];
                let museum_link = $(`<div id="${state}-m-${i}" class="m-data">${museum.name}</div>`);
                for (let ii = 0; ii < museum.store_links.length; ii++) {
                    museum_link.append(`<a href="${museum.store_links[ii]}">${museum.store_links[ii]}</a>`);
                }
                state_list.append(museum_link);
            }

            $('#museums').append(state_list);
        });

        $('path').on('click touchend', function (e) {
            e.preventDefault();

            let state = $(this).data('info').match(/State: (.*?)</i)[1].toLowerCase();
            $(`#museums`).html('')
            Museums[state].museums.forEach((museum, m) => {
                $(`#museums`).append(`
            <div id="museum${m}">
                <a href="${museum.link}">${museum.name}</a>
            </div>
            `);
                if (museum.store_links.length > 0) {
                    let store_list = "<ul>";
                    museum.store_links.forEach(link => {
                        store_list += `<li><a href="${link}">${link}</a></li>`;
                    });
                    store_list += "</ul>";
                    $(`#museum${m}`).append(store_list);
                }
            });
        });
    </script>
</body>

</html>