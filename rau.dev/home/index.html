
  <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "953fa297d19849c19c71194dd1f498b0"}'></script><!-- End Cloudflare-->
<style>
    html {
        background-color: black;
    }

    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        overflow-y: hidden;
    }

    pre {
        font-family: monospace;
        font-size: 2.5em;
        margin: 0;
        padding: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        user-select: none;
    }

    pre #nav {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
        padding-right: 4.5vw;
    }

    canvas {
        z-index: -1;
        width: 100%;
        height: 100%;
    }

    .info {
        background-color: white;
        padding: .1em;
        width: fit-content;
    }

    #r {
        color: #4e8cff;
    }

    #au {
        color: #FFD700
    }

    @keyframes flip {
        0% {
            transform: perspective(600px) rotateX(0);
            transition-timing-function: ease-out;
        }

        50% {
            transform: perspective(600px) rotateX(-180deg);
            transition-timing-function: ease-out;
        }

        100% {
            transform: perspective(600px) rotateX(-90deg);
            transition-timing-function: ease-in;
        }
    }

    .element {
        transform-style: preserve-3d;
        animation: flip 2s infinite;
        backface-visibility: hidden;
    }
</style>
<pre>
<span class="info" id="name"><b id="r">R</b>obert <b id="au">Au</b>coin</span>
<p><span id="title"><div id="flip" class="info">Creative Technologist</div></span></p>

<div class="info" id="nav">
    <a href="https://0b.lol">Portfolio</a>
    <a href="https://www.linkedin.com/in/robfau">LinkedIn</a>
    <a href="https://github.com/aurob">GitHub</a>
</div>
</pre>
<canvas></canvas>
<script type="module">
    let canvas = document.querySelector('canvas');
    let ctx = canvas.getContext('2d');
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    let content = document.querySelector('pre');
    let csize = content.getBoundingClientRect();
    let numPoints = 100; // number of points to create the circle
    let points = []; // array to hold the points
    let circle = {
        points: points,
        centerX: csize.left + csize.width / 2,
        centerY: -(csize.width / 2)-csize.width/10,
        radius: csize.width / 2,
        r: 255,
        g: 0,
        b: 0,
        a: 0.5,
        ax: .0001,
        pointPulse: .5,
        hueShift: 1000,
        updatePoints: function () {
            for (let i = 0; i < numPoints; i++) {
                let angle = i * 2 * Math.PI / numPoints;
                let x = circle.centerX + circle.radius * Math.cos(angle);
                let y = circle.centerY + circle.radius * Math.sin(angle);
                y += height / 2;
                this.points[i].x = x;
                this.points[i].y = y;
            }
        }
    };

    let mouseTrail = [];
    let mouse = {
        x: 0,
        y: 0,
        down: false
    };
    let lastMouse = {
        x: 0,
        y: 0,
        down: false
    };

    // generate points for the circle
    for (let i = 0; i < numPoints; i++) {
        let angle = i * 2 * Math.PI / numPoints;
        let x = circle.centerX + circle.radius * Math.cos(angle);
        let y = circle.centerY + circle.radius * Math.sin(angle);
        circle.points.push({ x, y });
    }


    let ground = {
        r: 26, g: 187, b: 51
    };
    let groundO = JSON.parse(JSON.stringify(ground));

    let sky = {
        r: 78, g: 140, b: 255
    };
    let skyO = JSON.parse(JSON.stringify(sky));

    let cursorImg = new Image();
    cursorImg.src = 'cursor.png';

    

    let titles = [
        'Software Engineer',
        'Full Stack Developer',
        'Front End Developer',
        'Back End Developer',
        'Web Developer',
        'Game Developer',
        'Software Developer',
        'Programmer',
        // 'Designer',
        'Artist',
        'Musician',
        // 'Photographer',
        // 'Illustrator',
        // 'Graphic Designer',
        'UI Designer',
        // 'UX Designer',
        // '3D Generalist',
        // '3D Visualizer',
        'Creative Technologist',
    ];
    var t = 0;

    let title_index = 0;
    function hue2rgb(p, q, t) {
        if (t < 0) t += 1;
        if (t > 1) t -= 1;
        if (t < 1 / 6) return p + (q - p) * 6 * t;
        if (t < 1 / 2) return q;
        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
        return p;
    };

    function hslToRgb(h, s, l) {
        let r, g, b;

        if (s == 0) {
            r = g = b = l; // achromatic
        } else {

            let q = l < 0.5 ? l * (1 + s) : l + s - l * s;
            let p = 2 * l - q;
            r = hue2rgb(p, q, h + 1 / 3);
            g = hue2rgb(p, q, h);
            b = hue2rgb(p, q, h - 1 / 3);
        }

        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
    }

    function map_range(number, inMin, inMax, outMin, outMax) {
        // Make sure the input number is within the input range
        number = Math.min(Math.max(number, inMin), inMax);

        // Calculate the ratio of the input number within the input range
        const inRangeRatio = (number - inMin) / (inMax - inMin);

        // Map the ratio to the output range
        const mappedValue = outMin + inRangeRatio * (outMax - outMin);

        return mappedValue;
    }

    var reset = false;
    function test() {
        requestAnimationFrame(test);
        ctx.clearRect(0, 0, width, height);


        // Sky
        ctx.fillStyle = `rgb(${sky.r}, ${sky.g}, ${sky.b})`;
        ctx.fillRect(0, 0, width, height / 2);

        // Shadow under #name
        let name = document.querySelector('#name');
        let name_pos = name.getBoundingClientRect();
        let title = document.querySelector('#title');
        let title_pos = title.getBoundingClientRect();
        let nav = document.querySelector('#nav');
        let nav_pos = nav.getBoundingClientRect();

        // draw the circle using the points
        ctx.beginPath();
        ctx.moveTo(points[0].x, points[0].y);

        for (let i = 1; i < points.length; i++) {
            ctx.lineTo(points[i].x, points[i].y);

            if(reset) {
                points[i].y -= height;
                if(i == points.length - 1) {
                    reset = false;
                }
            }
            else points[i].y += .5;// if the sun dips below the horizon, move it above the top of the screen

            // if (points[i].y > height / 2) {
            //     points[i].y -= height / 2;
            // }

            if(i == points.length - 1) {
                if(points[i].y >= height - circle.radius) {
                    reset = true;
                }
            }
        }

        
        
        ctx.closePath();
        ctx.fillStyle = '#ffd65b';
        ctx.fill();


        ctx.fillStyle = `rgb(${ground.r}, ${ground.g}, ${ground.b})`;
        ctx.fillRect(0, height / 2, width, height / 2);

        t += 0.01;
    
    }

    window.addEventListener('resize', () => {
        console.log('resize');
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;

        csize = content.getBoundingClientRect();
        circle.centerX = csize.left + csize.width / 2;
        circle.centerY = 0;
        circle.radius = csize.width / 2;

        //update points
        circle.updatePoints();
    });

    window.addEventListener('load', (e) => {
        console.log(new Date());
        test();

        let title = document.querySelector('#flip');
        setInterval(() => {
            title.classList.add('element');
            setTimeout(() => {
                title.classList.remove('element');
                title_index++;
                if (title_index >= titles.length) {
                    title_index = 0;
                }
                title.innerHTML = titles[title_index];
            }, 1000);
        }, 2000);
    });
</script>
