<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>2D Game Engine Prototype</title>
    <meta name="title" content="2D Game Engine Prototype">
    <meta name="description" content="A basic 2d engine using C++ SDL2">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://robauis.me/clife/new2.html">
    <meta property="og:title" content="2D Game Engine Prototype">
    <meta property="og:description" content="A basic 2d engine using C++ SDL2">
    <meta property="og:image" content="https://robauis.me/clife/Resources/prev.png">


    

    <style>
        #content {
            display: block;
            width: 100%;
        }
        #canvas {
            float: left;
        }
        #info {
            display: grid;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" 
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" 
            crossorigin="anonymous">
    </script>
    
</head>

<body>

    <!-- Create the canvas that the C++ code will draw into -->
    <div id="content">
        <div></div>
        <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
        <p>
            WASD to move!<br>
            Scroll Wheel to Zoom!<br>
            Click on tiles to place!
        </p>
        <div id="info">
            Global Position: <span id="global"></span>
            <span id="chunk"></span>
            Screen Mouse Position: <span id="mouse"></span>
            Screen Mouse Tile Position: <span id="mousechk"></span>
            <span id="zoom"></span>
        </div>
        Avater Sprite: <input type="number" id="icon" value=1 min=0 max=32>
    </div>
    

    <!-- Allow the C++ to access the canvas element and some C++ methods --> 
    <script type='text/javascript'>
        var get_info;
        var ecount;
        var Module = {
            onRuntimeInitialized: function(){
                get_info = Module.cwrap('get_info', 'string', ['number']);
                ecount = Module.cwrap('ecount', 'number', ['']);
            },
            canvas: (function() { return document.getElementById('canvas'); })()
        };

    </script>
    
    <!-- Add the javascript glue code (index.js) as generated by Emscripten -->
    <script>
        
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        function getIcon(){
            return document.getElementById("icon").value;
        }

        $(document).ready(function(){
            
            ctx.canvas.width = 1000;
            ctx.canvas.height = window.innerHeight;
            setInterval(()=>{
                if(get_info){
                    $("#mousechk").html(get_info(2));
                    $("#global").html(get_info(1));
                    $("#mouse").html(get_info(0));
                }
            }, 10);
        });
    </script>
    <script src="new2.js"></script>

</body>

</html>